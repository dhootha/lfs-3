<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content=
    "application/xhtml+xml; charset=iso-8859-1" />
    <title>
      5.10.&nbsp;GCC-4.4.3 - Pass 2
    </title>
    <link rel="stylesheet" href="../stylesheets/lfs.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="lfs" id="lfs-6.6">
    <div class="navheader">
      <h4>
        Linux From Scratch - Version 6.6
      </h4>
      <h3>
        Chapter&nbsp;5.&nbsp;&#26500;&#24314;&#20020;&#26102;&#31995;&#32479; 
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="binutils-pass2.html" title=
          "Binutils-2.20 - Pass 2">&#21518;&#36864;</a>
          <p>
            Binutils-2.20 - &#31532;&#20108;&#36941;
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="tcl.html" title="Tcl-8.5.8">&#21069;&#36827;</a>
          <p>
            Tcl-8.5.8
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="chapter05.html" title=
          "Chapter&nbsp;5.&nbsp;Constructing a Temporary System">&#19978;&#19968;&#32423;</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Linux From Scratch - Version 6.6">&#39318;&#39029;</a>
        </li>
      </ul>
    </div>
    <div class="wrap" lang="en" xml:lang="en">
      <h1 class="sect1">
        <a id="ch-tools-gcc-pass2" name="ch-tools-gcc-pass2"></a>5.10.
        GCC-4.4.3 - &#31532;&#20108;&#36941;
      </h1>
      <div class="package" lang="en" xml:lang="en">
        <p>
          GCC &#36719;&#20214;&#21253;&#21253;&#21547; GNU &#32534;&#35793;&#22120;&#38598;&#21512;&#65292;&#21253;&#25324; C &#21644; C++ &#32534;&#35793;&#22120;&#12290;
        </p>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">&#39044;&#35745;&#32534;&#35793;&#26102;&#38388;:</strong>
              <span class="segbody">9.0 SBU</span>
            </div>
            <div class="seg">
              <strong class="segtitle">&#25152;&#38656;&#30913;&#30424;&#31354;&#38388;:</strong>
              <span class="segbody">1003 MB</span>
            </div>
          </div>
        </div>
      </div>
      <div class="installation" lang="en" xml:lang="en">
        <h2 class="sect2">
          5.10.1. &#23433;&#35013; GCC
        </h2>
        <p>
          &#39640;&#20110;4.3&#29256;&#30340;GCC <span id="result_box"><span title="treat this build as if it were a relocated compiler" closure_uid_dlihol="141">&#25226;&#36825;&#20010;&#32534;&#35793;&#24403;&#20570;&#19968;&#20010;&#37325;&#32622;&#30340;&#32534;&#35793;&#22120;</span></span>&#65292; &#24182;&#19988;&#31105;&#27490;&#22312;&#34987;<em> </em><em class=
          "parameter"><code>--prefix</code></em>&#25351;&#23450;&#30340;&#20301;&#32622;&#25628;&#32034; startfiles&#12290;&#22240;&#20026;&#36825;&#27425;&#19981;&#26159;&#37325;&#32622;&#30340;&#32534;&#35793;&#22120;&#65292;&#24182;&#19988; <code class=
          "filename">/tools</code> &#30446;&#24405;&#20013;&#30340;startfiles   &#23545;&#20110;&#21019;&#24314;&#19968;&#20010;&#38142;&#25509;&#21040; <code class="filename">/tools</code> &#30446;&#24405;&#24211;&#30340;&#24037;&#20316;&#32534;&#35793;&#22120;&#24456;&#37325;&#35201;&#65292;&#25152;&#20197;&#25105;&#20204;&#20351;&#29992;&#19979;&#38754;&#30340;&#34917;&#19969;&#65292; &#23427;&#21487;&#20197;&#37096;&#20998;&#36824;&#21407;GCC&#30340;&#32769;&#21151;&#33021;&#65306;         </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../gcc-4.4.3-startfiles_fix-1.patch</kbd></pre>
        <p>
          &#22312;&#27491;&#24120;&#26465;&#20214;&#19979;&#65292;&#36816;&#34892;GCC&#30340; <span class=
          "command"><strong>fixincludes</strong></span><strong> </strong> &#33050;&#26412;&#65292;&#26159;&#20026;&#20102;&#20462;&#22797;&#21487;&#33021;&#25439;&#22351;&#30340;&#22836;&#25991;&#20214;&#12290; &#22240;&#20026;&#65292; &#29616;&#22312;&#24050;&#32463;&#23433;&#35013; GCC-4.4.3 &#21644;
          Glibc-2.11.1&#65292;  &#24182;&#19988;&#23427;&#20204;&#21508;&#33258;&#30340;&#22836;&#25991;&#20214;&#20247;&#25152;&#21608;&#30693;&#65292; &#27809;&#24517;&#35201;&#20462;&#22797;&#65292; &#25152;&#20197;&#65292; &#19981;&#38656;&#35201;&#36816;&#34892;&#36825;&#20010; <strong><span class="command"><strong>fixincludes</strong></span> </strong> &#33050;&#26412;&#12290;   &#20107;&#23454;&#19978;&#65292; &#36816;&#34892;&#36825;&#20010;&#33050;&#26412;&#30830;&#23454;&#20250;&#27745;&#26579;&#32534;&#35793;&#29615;&#22659;&#65292; &#22240;&#20026;&#23427;&#20250;&#25226;&#23487;&#20027;&#31995;&#32479;&#20013;&#24050;&#20462;&#22797;&#30340;&#22836;&#25991;&#20214;&#23433;&#35013;&#21040;GCC&#19987;&#23646;&#22836;&#25991;&#20214;&#30446;&#24405;&#37324;&#12290; &#36890;&#36807;&#25191;&#34892;&#19979;&#38754;&#30340;&#21629;&#20196;&#65292; &#21487;&#20197;&#25233;&#21046; <strong><span class="command"><strong>fixincludes</strong></span> </strong> &#33050;&#26412;&#30340;&#36816;&#34892;&#65306; </p>
        <pre class="userinput"><kbd class=
        "command">cp -v gcc/Makefile.in{,.orig}
sed 's@\./fixinc\.sh@-c true@' gcc/Makefile.in.orig &gt; gcc/Makefile.in</kbd></pre>
        <p>
          &#23545;&#20110;x86 &#31995;&#32479;&#65292;GCC &#30340;&#33258;&#20030;&#32534;&#35793;&#65292;&#20351;&#29992;  <code class=
          "option">-fomit-frame-pointer</code>&#32534;&#35793;&#22120;&#26631;&#24535;&#12290; &#38750;&#33258;&#20030;&#65288;Non-bootstrap&#65289;&#32534;&#35793;&#65292; &#40664;&#35748;&#24573;&#30053;&#36825;&#20123;&#26631;&#24535;&#65292; &#22914;&#26524;&#26159;&#21487;&#33258;&#20030;&#30340;&#65292; &#30446;&#26631;&#23601;&#24212;&#35813;&#26159;&#20135;&#29983;&#19968;&#20010;&#23436;&#20840;&#30456;&#21516;&#30340;&#32534;&#35793;&#22120;&#12290; &#24212;&#29992;&#19979;&#38754;&#30340; <span class=
          "command"><strong>sed</strong></span>&#21629;&#20196;&#65292; &#26469;&#24378;&#34892;&#20351;&#32534;&#35793;&#36807;&#31243;&#20351;&#29992;&#36825;&#20010;&#26631;&#24535;&#65306;</p>
        <pre class="userinput"><kbd class=
        "command">cp -v gcc/Makefile.in{,.tmp}
sed 's/^T_CFLAGS =$/&amp; -fomit-frame-pointer/' gcc/Makefile.in.tmp \
  &gt; gcc/Makefile.in</kbd></pre>
        <p>&#19979;&#38754;&#30340;&#21629;&#20196;&#20250;&#26356;&#25913;GCC&#30340;&#40664;&#35748;&#21160;&#24577;&#38142;&#25509;&#22120;&#30340;&#20301;&#32622;&#65292;&#26469;&#20351;&#29992;&#24050;&#23433;&#35013;&#22312; <code class=
          "filename">/tools</code> &#30446;&#24405;&#19979;&#30340;&#38142;&#25509;&#22120;&#65292; &#23427;&#20063;&#20250;&#20174; GCC&#30340; include &#25628;&#32034;&#30446;&#24405;&#21024;&#38500;  <code class=
          "filename">/usr/include</code>&#12290; &#29616;&#22312;&#36825;&#26679;&#20570;&#65292; &#32780;&#19981;&#26159;&#31561;&#23433;&#35013;&#20197;&#21518;&#65292; &#22312;&#35843;&#25972;specs&#25991;&#20214;&#65292; &#26159;&#20026;&#20102;&#30830;&#20445;&#22312;GCC&#30495;&#23454;&#30340;&#32534;&#35793;&#36807;&#31243;&#20013;&#65292; &#20351;&#29992;&#26032;&#30340;&#21160;&#24577;&#38142;&#25509;&#22120;&#12290; &#20063;&#23601;&#26159;&#35828;&#65292; &#22312;&#32534;&#35793;&#36807;&#31243;&#20013;&#21019;&#24314;&#30340;&#25152;&#26377;&#20108;&#36827;&#21046;&#25991;&#20214;&#65292;&#37117;&#20250;&#38142;&#25509;&#21040;&#26032;&#30340;   Glibc&#25991;&#20214;&#12290;&#25191;&#34892;&#65306;</p>
        <pre class="userinput"><kbd class="command">for file in \
 $(find gcc/config -name linux64.h -o -name linux.h -o -name sysv4.h)
do
  cp -uv $file{,.orig}
  sed -e 's@/lib\(64\)\?\(32\)\?/ld@/tools&amp;@g' \
  -e 's@/usr@/tools@g' $file.orig &gt; $file
  echo '
#undef STANDARD